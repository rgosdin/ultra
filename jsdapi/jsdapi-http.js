(function(h){})(window.jsdapi=window.jsdapi||{});
(function(h){function m(a,b,d){if(a.url){var c=new XMLHttpRequest,f=a.url+n(a.query);c.open(a.method,f,!0);if("arraybuffer"===a.responseType||"binaryToBase64"===a.responseType)c.responseType="arraybuffer";else if("blob"===a.responseType||"binary"===a.responseType)c.responseType="blob";if(b)for(var g in b)b.hasOwnProperty(g)&&b[g]&&c.setRequestHeader(g,b[g]);a.accessToken&&c.setRequestHeader("Authorization","Bearer "+a.accessToken);a.contentType&&c.setRequestHeader("Content-Type",a.contentType);c.onreadystatechange=
function(){if(4===c.readyState){var b=null,e=3===d.length?c.getAllResponseHeaders():null;if(200===c.status)if("json"===a.responseType)try{b=JSON.parse(c.responseText)}catch(q){Logger.instance.error("could not parse json data:",q)}else b="blob"===a.responseType||"arraybuffer"===a.responseType||"binary"===a.responseType?c.response:"binaryToBase64"===a.responseType?r(c.response):c.responseText;if(e){var k=e.split("\n");e={};for(var g=0;g<k.length;g++){var f=k[g],h=f.indexOf(":");if(0<=h){var p=f.substr(0,
h).trim();f=f.substr(h+1).trim();e[p]=f}}}setTimeout(function(){3===d.length?l(d,b,c.status,e):l(d,b,c.status)},0)}};c.onerror=function(b){Logger.instance.error("Error occurred on XHR ("+a.url+"):",b);l(d,void 0,-1)};c.ontimeout=function(){Logger.instance.error("Timeout occurred on XHR ("+a.url+")");l(d,void 0,-2)};a.content?c.send(a.content):c.send()}else l(d,null,10)}var f={};h.setup=function(a){if(a&&a.headers)for(var b in a.headers)a.headers.hasOwnProperty(b)&&a.headers[b]&&(f[b]=a.headers[b])};
h.sendRequest=function(a,b){var d=a.headers||{},c;for(c in f)f.hasOwnProperty(c)&&!d.hasOwnProperty(c)&&(d[c]=f[c]);m(a,d,b)};var n=function(a){var b="";if(void 0!==a&&null!==a)for(var d in a)a.hasOwnProperty(d)&&(b=""===b?"?":b+"&",b=b+encodeURIComponent(d)+"="+encodeURIComponent(a[d]));return b},r=function(a){var b="";a=new Uint8Array(a);var d=a.byteLength,c=d%3;d-=c;for(var f,g,h,e,k=0;k<d;k+=3)e=a[k]<<16|a[k+1]<<8|a[k+2],f=(e&16515072)>>18,g=(e&258048)>>12,h=(e&4032)>>6,e&=63,b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e];1==c?(e=a[d],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&252)>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&3)<<4]+"=="):2==c&&(e=a[d]<<8|a[d+1],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&64512)>>10]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&
1008)>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&15)<<2]+"=");return b},l=function(a){if(a)try{a.apply(this,[].slice.call(arguments).splice(1))}catch(b){Logger.instance.error(b)}}})(window.jsdapi.http=window.jsdapi.http||{});
