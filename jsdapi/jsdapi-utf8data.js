function JsDapiUtf8Data(){this.m_data=[]}JsDapiUtf8Data.prototype.appendString=function(a){if(a&&a.length){var f=a.length,b=new Uint8Array(new ArrayBuffer(4*f)),c=0,g,e;for(g=0;g<f;++g){var d=a.charCodeAt(g);if(127>=d)b[c++]=d;else if(2047>=d)b[c++]=192|d>>>6,b[c++]=128|d&63;else if(65535>=d)b[c++]=224|d>>>12,b[c++]=128|d>>>6&63,b[c++]=128|d&63;else{for(e=4;d>>6*e;)e++;for(b[c++]=65280>>>e&255|d>>>6*--e;e--;)b[c++]=128|d>>>6*e&63}}this.m_data.push.apply(this.m_data,b.subarray(0,c))}};
JsDapiUtf8Data.prototype.appendArray=function(a){a&&a.length&&this.m_data.push.apply(this.m_data,a)};JsDapiUtf8Data.prototype.appendArrayBuffer=function(a){if(a&&(a instanceof ArrayBuffer||"[object ArrayBuffer]"==a.toString())){a=new Uint8Array(a);for(var f=a.length,b=0,c,g=parseInt(f/10240)+(0==f%10240?0:1),e=0;e<g;e++)c=Math.min(10240,f-b),this.m_data.push.apply(this.m_data,a.subarray(b,b+c)),b+=c}};JsDapiUtf8Data.prototype.toBlob=function(){return new Blob([this.m_data],{type:"application/octet-stream"})};
JsDapiUtf8Data.prototype.toArrayBuffer=function(){return new ArrayBuffer(this.m_data)};JsDapiUtf8Data.prototype.toUint8Array=function(){return new Uint8Array(this.m_data)};
