var DjiCwuToast=function(b,a,c){var d=this;this.m_ui={mainView:document.createElement("dji-cwu-toast"),contentView:document.createElement("dji-cwu-toast-content"),textView:document.createElement("dji-cwu-toast-content-text"),actionView:void 0};this.m_timers={autoHide:void 0};this.m_options={closeOnClick:!(!a||!a.closeOnClick),action:void 0};a&&a.action&&(this.m_options.action={url:a.action.url||null,message:a.action.message||null,close:!!a.action.close},this.m_ui.actionView=document.createElement("dji-cwu-toast-content-action"));
this.m_ui.textView.innerText=b||"";this.m_ui.contentView.appendChild(this.m_ui.textView);this.m_ui.actionView&&(this.m_ui.actionView.innerText="TOPICS",this.m_ui.contentView.appendChild(this.m_ui.actionView),this.m_ui.mainView.setAttribute("dji-cwu-mode","action"));this.m_ui.mainView.appendChild(this.m_ui.contentView);document.documentElement.appendChild(this.m_ui.mainView);this.m_options.closeOnClick&&this.m_ui.contentView.addEventListener("click",function(){d.__destroy()});this.m_ui.actionView&&
this.m_ui.actionView.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();d.__onAction()});!isNaN(c)&&0<c&&(this.m_timers.autoHide=new DjiTimer(this,this.__destroy),this.m_timers.autoHide.trigger(c))};DjiCwuToast.show=function(b,a,c){DjiCwuToast.hide();DjiCwuToast.__instance=new DjiCwuToast(b,a,c)};DjiCwuToast.hide=function(){DjiCwuToast.__instance&&(DjiCwuToast.__instance.__destroy(),DjiCwuToast.__instance=void 0)};
DjiCwuToast.prototype.__destroy=function(){this.m_ui.mainView.remove();this.m_timers.autoHide&&this.m_timers.autoHide.stop();DjiCwuToast.__instance===this&&(DjiCwuToast.__instance=void 0)};
DjiCwuToast.prototype.__onAction=function(){var b=this;if(this.m_options.action.message)chrome.runtime.sendMessage({message:this.m_options.action.message},function(){b.m_options.action.close&&b.__destroy()});else if(this.m_options.action.url){var a=DjiCwuToast.__urlToWindowName(this.m_options.action.url);window.open(this.m_options.action.url,a);b.m_options.action.close&&b.__destroy()}};DjiCwuToast.__urlToWindowName=function(b){return"_blank"};
