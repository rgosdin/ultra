window.dji=window.dji||{};
(function(e){function t(){l=f.Running}function u(b){n=!1;switch(b.error){case "no-speech":g=0;break;case "not-allowed":g=401;c("error");break;default:g=500,c("error")}}function v(){c("audiostart")}function w(){c("audioend")}function x(){c("soundstart")}function y(){c("soundend")}function z(){c("speechstart")}function A(){c("speechend")}function B(){if(n)setTimeout(function(){a.start()},0);else{var b=d.end,h=g,k=m;l=f.Idle;d.progress=null;m=d.end=null;g=0;c("end",k);p(b,{error:h},k)}}function C(){for(var b=
"",a=event.resultIndex;a<event.results.length;++a)event.results[a].isFinal&&(b+=event.results[a][0].transcript);b=b.trim();0<b.length&&p(d.progress,{error:0,text:b},m)}function c(a,c){if(d.notification)try{d.notification({type:a},c||m)}catch(k){Logger.instance.error(k)}}function p(a){if(a)try{a.apply(this,[].slice.call(arguments).splice(1))}catch(h){Logger.instance.error(h)}}var f={NoInitialized:0,Idle:1,Running:2},a=null,q={US:"en-US",UK:"en-GB",BE:"en-GB",CAN:"en-CA",FR:"fr-FR",SPA:"es-ES",GER:"de-DE"},
l=f.NoInitialized,n=!1,d={notification:null,progress:null,end:null},m=null,g=0;e.initialize=function(){"webkitSpeechRecognition"in window&&!a&&(a=new webkitSpeechRecognition,a.continuous=!1,a.interimResults=!1,a.onstart=t,a.onerror=u,a.onaudiostart=v,a.onaudioend=w,a.onsoundstart=x,a.onsoundend=y,a.onspeechstart=z,a.onspeechend=A,a.onresult=C,a.onend=B,l=f.Idle)};e.start=function(b,c,k,e,r){if(l!==f.Idle)return p(e,{error:503},r);var h=b.toUpperCase();b=q.hasOwnProperty(h)?q[h]:b;d.notification=c;
d.progress=k;d.end=e;m=r;g=0;n=!0;a.lang=b;a.start()};e.stop=function(b){l===f.Running&&(n=!1,a.stop())}})(window.dji.speechRecognition=window.dji.speechRecognition||{});
