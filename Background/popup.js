var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var e=a.length,f=0;f<e;f++){var h=a[f];if(c.call(b,h,f,a))return{i:f,v:h}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in b||(b[f]={});b=b[f]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
(function(){function a(){$("body").addClass("dji-cwu-busy")}function c(){$("body").removeClass("dji-cwu-busy")}function b(){d.__onBrowserAction();window.close()}function e(){a();d.__onBrowserAction(function(){c();$("#dji-cwu-on").toggleClass("dji-cwu-on")})}function f(){d.onOptions();window.close()}function h(){d.onCreateTopicFromPage();window.close()}function l(){d.onCreateTopicFromSelection();window.close()}function m(){d.signOut(function(){});window.close()}function n(a,b,c){if("com.donjohnston.cowriter.notification"===
a.message){b=!1;switch(a.reason){case "load":case "initialize_nacl_started":case "initialize_nacl_finished":case "activate":case "deactivate":case "update_topic_finished":case "update_topic_started":b=!0}b&&k()}}function p(){chrome.runtime.onMessage.addListener(n);$("#dji-cwu-on").on("click",e);$("#dji-cwu-topic-from-page").on("click",h);$("#dji-cwu-topic-from-selection").on("click",l);$("#dji-cwu-options").on("click",f);$("#dji-cwu-sign-in").on("click",b);$("#dji-cwu-sign-out").on("click",m);$("#dji-cwu-reload").on("click",
function(){return chrome.runtime.reload()})}function k(){d&&d.isLoaded()&&!d.isBusy()?c():a();d.isLoggedIn()?($("#dji-cwu-user-name").find(".dji-cwu-menu-item-text").text(d.userInfo().name),$("[dji-cwu-login]").show(),$("[dji-cwu-no-login]").hide()):($("#dji-cwu-topic-from-page").addClass("dji-cwu-disabled"),$("#dji-cwu-topic-from-selection").addClass("dji-cwu-disabled"),$("[dji-cwu-login]").hide(),$("[dji-cwu-no-login]").show());d.m_on?$("#dji-cwu-on").addClass("dji-cwu-on"):$("#dji-cwu-on").removeClass("dji-cwu-on")}
var g=chrome.extension.getBackgroundPage(),d=g&&g.CWEBackgroundManagerInstance?g.CWEBackgroundManagerInstance():null;$(document).ready(function(){k();p();g||(g=chrome.extension.getBackgroundPage());if(g){var a=g.dji.config.cowriterUrl();$("a[dji-cowriter-url]").attr("href",a)}})})();
